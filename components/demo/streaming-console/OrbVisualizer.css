.orb-visualizer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  pointer-events: none;
}

/* --- Input Visualizer - User Speaking --- */
.input-visualizer {
  position: absolute;
  inset: 0;
}
.input-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 2px solid rgba(0, 220, 255, 0.7);
  transform: translate(-50%, -50%) scale(calc(0.95 + var(--input-volume) * 0.2));
  opacity: calc(var(--input-volume) * var(--input-volume));
  mix-blend-mode: screen;
}
.input-ring:nth-child(1) {
  transition:
    transform 200ms ease-out,
    opacity 400ms ease-out;
}
.input-ring:nth-child(2) {
  transition:
    transform 250ms ease-out,
    opacity 400ms ease-out;
  transition-delay: 50ms;
}
.input-ring:nth-child(3) {
  transition:
    transform 300ms ease-out,
    opacity 400ms ease-out;
  transition-delay: 100ms;
}

/* --- Playback Visualizer - AI Speaking --- */
.playback-visualizer {
  position: absolute;
  inset: 0;
  overflow: hidden;
  border-radius: 50%;
  /* Overall intensity scales with playback volume */
  transform: scale(calc(0.9 + var(--playback-volume) * 0.2));
  opacity: calc(var(--playback-volume) * 0.8);
  transition:
    transform 400ms ease-out,
    opacity 400ms ease-out;
  /* Add perspective and preserve 3D for children */
  perspective: 800px;
  transform-style: preserve-3d;
}

@keyframes aurora-swirl-1 {
  from {
    transform: rotateX(0) rotateY(0) rotateZ(0) scale(1.5);
  }
  to {
    transform: rotateX(360deg) rotateY(180deg) rotateZ(90deg) scale(1.5);
  }
}

@keyframes aurora-swirl-2 {
  from {
    transform: rotateX(0) rotateY(0) rotateZ(0) scale(1.2);
  }
  to {
    transform: rotateX(-180deg) rotateY(-360deg) rotateZ(-180deg) scale(1.2);
  }
}

.aurora-layer {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  mix-blend-mode: screen;
  filter: blur(50px);
  opacity: 0.7;
}

.aurora-layer.aurora1 {
  background:
    radial-gradient(ellipse at 40% 60%, hsla(260, 100%, 70%, 0.8) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 30%, hsla(220, 90%, 60%, 0.6) 0%, transparent 40%);
  animation: aurora-swirl-1 25s linear infinite;
}

.aurora-layer.aurora2 {
  background:
    radial-gradient(ellipse at 60% 40%, hsla(190, 100%, 80%, 0.5) 0%, transparent 60%),
    linear-gradient(135deg, hsla(300, 90%, 50%, 0.4) 0%, transparent 70%);
  animation: aurora-swirl-2 35s linear infinite reverse;
}

.aurora-layer.aurora3 {
  background:
    radial-gradient(ellipse at 50% 50%, hsla(240, 100%, 75%, 0.5) 0%, transparent 50%),
    radial-gradient(ellipse at 20% 80%, hsla(200, 100%, 60%, 0.6) 0%, transparent 45%);
  animation: aurora-swirl-1 45s linear infinite alternate;
}