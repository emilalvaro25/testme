.orb-visualizer {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  pointer-events: none;
}

/* --- Input Visualizer - User Speaking --- */
.input-visualizer {
  position: absolute;
  inset: 0;
  mix-blend-mode: screen;
  opacity: 0.9;
}

/* Add a soft inner glow that responds to user voice */
.input-visualizer::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  box-shadow: inset 0 0 40px 10px rgba(0, 220, 255, 0.7);
  opacity: var(--input-volume);
  transform: scale(calc(1 + var(--input-volume) * 0.05));
  transition: all 300ms ease-out;
}

.input-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  height: 100%;
  border-radius: 50%;
  border: 1.5px solid rgba(0, 220, 255, 0.8); /* Cyan color */
  transform: translate(-50%, -50%) scale(calc(0.95 + var(--input-volume) * 0.25));
  opacity: calc(var(--input-volume) * var(--input-volume) * 1.2);
}

/* Staggered and more organic transitions */
.input-ring:nth-child(1) {
  transition:
    transform 300ms cubic-bezier(0.2, 1, 0.3, 1),
    opacity 500ms ease-out;
}

.input-ring:nth-child(2) {
  transition:
    transform 350ms cubic-bezier(0.2, 1, 0.3, 1),
    opacity 500ms ease-out;
  transition-delay: 80ms;
}

.input-ring:nth-child(3) {
  transition:
    transform 400ms cubic-bezier(0.2, 1, 0.3, 1),
    opacity 500ms ease-out;
  transition-delay: 160ms;
}

/* --- Playback Visualizer - AI Speaking --- */
.playback-visualizer {
  position: absolute;
  inset: 0;
  overflow: hidden;
  border-radius: 50%;
  /* Overall intensity scales with playback volume */
  transform: scale(calc(0.8 + var(--playback-volume) * 0.4));
  opacity: calc(var(--playback-volume) * 1.1); /* Slightly brighter */
  transition:
    transform 400ms ease-out,
    opacity 400ms ease-out;
  /* Add perspective and preserve 3D for children */
  perspective: 800px;
  transform-style: preserve-3d;
}

@keyframes swirl3d {
  0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1.2); }
  50% { transform: rotateX(180deg) rotateY(90deg) rotateZ(180deg) scale(1.5); }
  100% { transform: rotateX(360deg) rotateY(360deg) rotateZ(360deg) scale(1.2); }
}

@keyframes swirl-reverse3d {
  0% { transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) scale(1.4); }
  50% { transform: rotateX(-90deg) rotateY(-180deg) rotateZ(-180deg) scale(1.1); }
  100% { transform: rotateX(-360deg) rotateY(-360deg) rotateZ(-360deg) scale(1.4); }
}

.aurora-layer {
  position: absolute;
  width: 200%;
  height: 200%;
  top: -50%;
  left: -50%;
  opacity: 0.6;
  mix-blend-mode: color-dodge; /* A more ethereal blend mode */
}

.aurora-layer.aurora1 {
  background: radial-gradient(
    ellipse at 40% 60%,
    rgba(200, 100, 255, 0.8) 0%,
    transparent 70%
  );
  animation: swirl3d 12s ease-in-out infinite;
}

.aurora-layer.aurora2 {
  background: radial-gradient(
    ellipse at 60% 40%,
    rgba(100, 150, 255, 0.7) 0%,
    transparent 70%
  );
  animation: swirl-reverse3d 15s ease-in-out infinite;
}

.aurora-layer.aurora3 {
  background: radial-gradient(
    ellipse at 50% 50%,
    rgba(255, 120, 200, 0.6) 0%,
    transparent 60%
  );
  animation: swirl3d 18s ease-in-out infinite reverse;
}
